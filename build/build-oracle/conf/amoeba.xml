<?xml version="1.0" encoding="gbk"?>
<!DOCTYPE amoeba:configuration SYSTEM "amoeba.dtd">

<amoeba:configuration xmlns:amoeba="http://amoeba.meidusa.com/">
    <!--proxy server config-->
    <server>
        <property name="port">8066</property>
        <property name="ipAddress">127.0.0.1</property>
        <property name="readThreadPoolSize">20</property>
        <property name="clientSideThreadPoolSize">30</property>
        <property name="serverSideThreadPoolSize">30</property>
        <property name="netBufferSize">100</property>
        <property name="tcpNoDelay">true</property>
        <property name="user">root</property>
        <property name="password">12345</property>
    </server>

    <!--connectionManagerList-->
    <connectionManagerList>
        <connectionManager name="defaultManager">
            <className>com.meidusa.amoeba.net.AuthingableConnectionManager</className>
        </connectionManager>
    </connectionManagerList>

    <!--dbServerList-->
    <dbServerList>
        <dbServer name="default">
            <factoryConfig>
                <className>com.meidusa.amoeba.oracle.net.OracleServerConnectionFactory</className>
                <property name="manager">defaultManager</property>
                <property name="port">1521</property>
                <property name="ipAddress">[ipAddress]</property>
                <property name="schema">[schema]</property>
                <property name="user">[user]</property>
                <property name="password">[password]</property>
            </factoryConfig>
            <!-- ObjectPool实现类 -->
            <poolConfig>
                <className>com.meidusa.amoeba.net.poolable.PoolableObjectPool</className>
                <property name="maxActive">200</property>
                <property name="maxIdle">200</property>
                <property name="minIdle">10</property>
                <property name="minEvictableIdleTimeMillis">600000</property>
                <property name="timeBetweenEvictionRunsMillis">600000</property>
                <property name="testOnBorrow">true</property>
                <property name="testWhileIdle">false</property>
            </poolConfig>
        </dbServer>
        <dbServer name="multiPool" virtual="true">
            <poolConfig>
                <className>com.meidusa.amoeba.server.MultipleServerPool</className>
                <!--
                                               负载均衡参数 1=ROUNDROBIN , 2=WEIGHTBASED
                -->
                <property name="loadbalance">1</property>
                <!--
                                               参与该pool负载均衡的poolName列表以逗号分割
                -->
                <property name="poolNames">default</property>
            </poolConfig>
        </dbServer>
    </dbServerList>

    <!-- queryRouter -->
    <queryRouter>
        <className>com.meidusa.amoeba.oracle.parser.OracleQueryRouter</className>
        <property name="ruleConfig">${amoeba.home}/conf/rule.xml</property>
        <property name="functionConfig">${amoeba.home}/conf/functionMap.xml</property>
        <property name="ruleFunctionConfig">${amoeba.home}/conf/ruleFunctionMap.xml</property>
        <property name="LRUMapSize">1500</property>
        <property name="defaultPool">default</property>
        <property name="needParse">true</property>
    </queryRouter>
</amoeba:configuration>